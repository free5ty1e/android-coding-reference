flowchart TD
    %% UI LAYER
    subgraph UI["UI LAYER"]
        MainActivity["MainActivity (Entry Point)"]
        ItemsScreen["ItemsScreen (Composable)"]
        ItemCard["TextOnlyItemCard / ImageItemCard (Composable)"]
    end
    
    %% VIEWMODEL LAYER  
    subgraph VM["VIEWMODEL LAYER"]
        ItemsViewModel["ItemsViewModel (ViewModel)"]
        ViewState["ItemsViewState (Sealed: Loading, Success, Error)"]
        ViewEvent["ItemsViewEvent (Sealed: Refresh, Click, GenerateRandomText)"]
        ViewEffect["ItemsViewEffect (Sealed: ShowSnackbar, Navigate)"]
    end
    
    %% REPOSITORY LAYER
    subgraph REPO["REPOSITORY LAYER"]
        ItemRepository["ItemRepository (Repository)"]
    end
    
    %% DATA SOURCE LAYER
    subgraph DS["DATA SOURCE LAYER"]
        RemoteDataSource["RemoteDataSource (Data Source)"]
    end
    
    %% MODEL LAYER
    subgraph MODEL["MODEL LAYER"]
        Item["Item (Sealed Class)"]
        TextItem["TextItem (Data Class)"]
        ImageItem["ImageItem (Data Class)"]
    end
    
    %% CONNECTIONS
    MainActivity -->|"creates & passes VM"| ItemsScreen
    ItemsScreen -->|"observes"| ItemsViewModel
    ItemsScreen -->|"renders"| ItemCard
    ItemCard -->|"displays"| Item
    ItemsViewModel -->|"exposes StateFlow"| ViewState
    ItemsViewModel -->|"handles"| ViewEvent  
    ItemsViewModel -->|"emits"| ViewEffect
    ItemsViewModel -->|"calls"| ItemRepository
    ItemRepository -->|"fetches"| RemoteDataSource
    RemoteDataSource -->|"returns List<Item>"| ItemRepository
    ItemRepository -->|"returns List<Item>"| ItemsViewModel
    Item -->|"sealed class of"| TextItem
    Item -->|"sealed class of"| ImageItem
    
    %% STYLING - ALL WHITE BACKGROUND, BLACK TEXT/BORDERS
    classDef nodeStyle fill:#ffffff,stroke:#000000,stroke-width:3px,color:#000000,font-size:14px,font-weight:bold
    classDef groupStyle fill:#ffffff,stroke:#000000,stroke-width:4px,color:#000000,font-size:16px,font-weight:bold
    
    class MainActivity,ItemsScreen,ItemCard,ItemsViewModel,ViewState,ViewEvent,ViewEffect,ItemRepository,RemoteDataSource,Item,TextItem,ImageItem nodeStyle
    class UI,VM,REPO,DS,MODEL groupStyle